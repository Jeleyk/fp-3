# Лабораторная работа №3: Функциональное программирование

**Студент**: Долгих Александр Алексеевич

**Группа**: P34092

## Цель работы

Получить навыки работы с вводом/выводом, потоковой обработкой данных, командной строкой.

## Требования

Реализовать лабораторную работу по предмету "Вычислительная математика" посвященную интерполяции со следующими
дополнениями:

1. Реализовать методы интерполяции:
    * Линейная интерполяция
    * Метод Лагранжа
2. Настройки программы должны задаваться через аргументы командной строки:
    * Используемые алгоритмы
    * Размер шагаF
3. Входные данные должны подаваться на стандартный ввод:
    * Значения каждой точки в формате "x<sub>i</sub> y<sub>i</sub>"
4. Выходные данные должны подаваться на стандартный вывод:
    * Найденные каждым заданным алгоритмом значения функции f(x).
5. Программа должна работать в потоковом режиме.

## Описание реализации

Функция для запроса ввода от пользователя через стандартный ввод с преобразованием введенных данных в нужный тип:

```clojure
(defn request-input [message parser]
  (println (str message ": "))
  (let [input (read-line)]
    (if (nil? input)
      (System/exit 0)
      (let [trimmed-input (str/trim input)]
        (if (empty? trimmed-input)
          (request-input message parser)
          (try
            (parser trimmed-input)
            (catch Exception _
              (println "The format of your input is invalid")
              (request-input message parser))))))))
```

Функция для реализации линейной интерполяции:

```clojure
(defn interpolate-by-linear [points x]
  (let [p0 (first points)
        p1 (second points)
        t (/ (- x (:x p0)) (- (:x p1) (:x p0)))]
    (+ (:y p0) (* t (- (:y p1) (:y p0))))))
```

Функция для реализации интерполяции методом Лагранжа:

```clojure
(defn- lagrange-coefficient [points i x]
  (reduce
    (fn [acc j]
      (if (= i j)
        acc
        (* acc
           (- x (:x (nth points j)))
           (/ 1 (- (:x (nth points i)) (:x (nth points j)))))))
    1
    (range (count points))))

(defn interpolate-by-lagrange [points x]
  (reduce
    (fn [result i]
      (+ result (* (:y (nth points i)) (lagrange-coefficient points i x))))
    0
    (range (count points))))
```

## Пример работы программы

```
C:\Users\Jeleyka\IdeaProjects\fp-3>clj -M -m ru.jeleyka.functionalprogramming.lab3.main -a linear -a lagrange
0 0
1.571 1
linear interpolation result:
0.0     1.0     2.0
0.0     0.6365372374283896      1.2730744748567793
3.142 0
linear interpolation result:
1.571   2.5709999999999997      3.5709999999999997
1.0     0.3634627625716106      -0.27307447485677905
4.712 -1
linear interpolation result:
3.142   4.1419999999999995      5.1419999999999995
0.0     -0.6369426751592354     -1.2738853503184713
lagrange interpolation result:
0.0     1.0     2.0     3.0     4.0     5.0
0.0     0.9730327803078239      0.8412021614785373      0.12027712752471191     -0.6739733375410798     -1.0257802497062658
12.568 0
linear interpolation result:
4.712   5.712   6.712   7.712   8.712   9.712   10.712  11.712  12.712
-1.0    -0.8727087576374746     -0.7454175152749491     -0.6181262729124236     -0.4908350305498982     -0.36354378818737265    -0.23625254582484723    -0.1089613034623218   0.018329938900203624
lagrange interpolation result:
1.571   2.5709999999999997      3.5709999999999997      4.571   5.571   6.571   7.571   8.571   9.571   10.571  11.571  12.571
1.0     0.37256398333350027     -0.2804143950021753     -0.9146287040041229     -1.4857725126694388     -1.949539389995219      -2.2616229049785597     -2.3777166266165564   -2.2535141239063066     -1.844708965844905      -1.1069947214294487     0.003935040342967057

Stopping.
```

## Заключение

В ходе выполнения лабораторной работы были изучены функции Clojure для работы с аргументами командной строки, вводом и
выводом, а также
организована обработка данных в потоковом режиме. Благодаря использованию функционального языка реализация методов
интерполяции оказалась очень простой и понятной.